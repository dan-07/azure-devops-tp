trigger:
  branches:
    include:
      - main

stages:
  - stage: CI
    jobs:
      - job: Test
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - checkout: self
          - task: UsePythonVersion@0
            inputs:
              versionSpec: '3.10'
          - script: |
              pip install -r requirements-dev.txt
            displayName: "Install deps"
          - script: ./scripts/run_unit_tests.sh
            displayName: "Run Tests"
          - script: ./scripts/run_bandit.sh
            displayName: "Run Bandit"
          - script: ./scripts/run_pip_audit.sh
            displayName: "Run pip-audit"
